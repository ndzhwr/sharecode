<!-- websockets.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharecode</title>
    <link rel="stylesheet" href="/css">
</head>

<body>
<h1>Sharecode</h1>
<pre id="output"></pre>
    <div id="wrap"><textarea id="input" placeholder="Type your code  here..." spellcheck="false" onkeyup="send()"></textarea></div>
<footer>Sharecode. Made by @ndzhwr</footer>
    <!-- <button onclick="send()">Send</button> -->
    <script>
        id  = prompt("Insert snippet id or enter a new one")
        var input = document.getElementById("input");
        var output = document.getElementById("output");
        var socket = new WebSocket(`wss://sc-9tv2.onrender.com/s/${id}`);

        socket.onopen = function () {
            output.innerHTML += "ðŸŸ¢ Connected";
            send();
        };
        socket.onerror = function (e) {
            console.log(e)
            output.innerHTML += "ðŸ”´Connection Error";
        };
        socket.onmessage = function (e) {
            input.value = e.data;
        };
        function send() {
            socket.send(input.value);
        }
    </script>
</body>

</html>